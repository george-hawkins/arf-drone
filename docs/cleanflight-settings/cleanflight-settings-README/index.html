<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Cleanflight Settings README · Large Quadcopter Build</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;TODO: the first part of below is just of technical interest - instead start with upgrading to 2.1.0, pasting in &lt;code&gt;parameters.txt&lt;/code&gt; and then the appropriate LEDs file and then explaining what you get with this (&lt;em&gt;AUX1&lt;/em&gt; and &lt;em&gt;AUX2&lt;/em&gt; setup) and suggest that the reader calibrate their accelerometer. Perhaps add in something related to the batter monitor and &lt;a href=&quot;https://github.com/cleanflight/cleanflight/issues/2951#issuecomment-332921466&quot;&gt;https://github.com/cleanflight/cleanflight/issues/2951#issuecomment-332921466&lt;/a&gt;&lt;/p&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Cleanflight Settings README · Large Quadcopter Build"/><meta property="og:type" content="website"/><meta property="og:url" content="https://george-hawkins.github.io/arf-drone/index.html"/><meta property="og:description" content="&lt;p&gt;TODO: the first part of below is just of technical interest - instead start with upgrading to 2.1.0, pasting in &lt;code&gt;parameters.txt&lt;/code&gt; and then the appropriate LEDs file and then explaining what you get with this (&lt;em&gt;AUX1&lt;/em&gt; and &lt;em&gt;AUX2&lt;/em&gt; setup) and suggest that the reader calibrate their accelerometer. Perhaps add in something related to the batter monitor and &lt;a href=&quot;https://github.com/cleanflight/cleanflight/issues/2951#issuecomment-332921466&quot;&gt;https://github.com/cleanflight/cleanflight/issues/2951#issuecomment-332921466&lt;/a&gt;&lt;/p&gt;
"/><meta property="og:image" content="https://george-hawkins.github.io/arf-drone/img/og-image.png"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/arf-drone/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/arf-drone/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/arf-drone/"><img class="logo" src="/arf-drone/img/header-icon.svg" alt="Large Quadcopter Build"/><h2 class="headerTitleWithLogo">Large Quadcopter Build</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>FPV quad</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Build</h3><ul><li class="navListItem"><a class="navItem" href="/arf-drone/docs/INTRO">Introduction</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/parts">Parts</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/purchase-order">Purchase Order</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/battery-charging">Battery Charging</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/transmitter-getting-started">Transmitter Getting Started</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/stick-setup">Stick Setup</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/transmitter-model-setup">Transmitter Model Setup</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/transmitter-flight-modes">Transmitter Flight Modes</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/receiver">Receiver</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/electronics-assembly">Electronics Assembly</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/binding">Binding</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/pixhawk-setup">Pixhawk Setup</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/frame-parts">Frame Parts</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/pdb-soldering">Pdb Soldering</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/frame-assembly">Frame Assembly</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/final-assembly">Final Assembly</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/build-2/build-2">Build 2</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/final-setup">Final Setup</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Appendices</h3><ul><li class="navListItem"><a class="navItem" href="/arf-drone/docs/pixhawk-leds">Pixhawk Leds</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/pixhawk-tones">Pixhawk Tones</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/pixhawk-driver">Pixhawk Driver</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/transmitter-extras">Transmitter Extras</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/soldering">Soldering</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/stores">Stores</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/windows-vm">Windows Vm</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/opentx-companion-on-ubuntu">Opentx Companion On Ubuntu</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/qgroundcontrol">Qgroundcontrol</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/notes">Notes</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">FPV quad</h3><ul><li class="navListItem"><a class="navItem" href="/arf-drone/docs/eachine-qx95">Eachine Qx95</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/inprogress-qx95">Inprogress Qx95</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/arf-drone/docs/cleanflight-settings/cleanflight-settings-README">Cleanflight Settings README</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/fpv-x-racer">Fpv X Racer</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Followup projects</h3><ul><li class="navListItem"><a class="navItem" href="/arf-drone/docs/video">Video</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/telemetry">Telemetry</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Miscellaneous</h3><ul><li class="navListItem"><a class="navItem" href="/arf-drone/docs/antenna-mount/antenna-mount-README">Antenna Mount README</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/antenna-mount/version-1/antenna-mount-v1-README">Antenna Mount Version 1 README</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/antenna-mount/version-2/antenna-mount-v2-README">Antenna Mount Version 2 README</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/f450-dimensions">F450 Dimensions</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/gps-mast-placement">Gps Mast Placement</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/notes-to-self">Notes To Self</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/pages-and-videos">Pages And Videos</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/power-module-xt60-to-deans">Power Module Xt60 To Deans</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/receiver-power">Receiver Power</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/receiver-windows-upgrade">Receiver Windows Upgrade</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/rx8r">Rx8r</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/unused-parts">Unused Parts</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/vibration-damping-platform">Vibration Damping Platform</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/voice">Voice</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/sounds">Sounds</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/case">Case</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/foam-outline/foam-outline-README">Foam Outline README</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/20181021-rebuild-params/20181021-rebuild-params-README">20181021 Rebuild Params README</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/george-hawkins/arf-drone/edit/docusaurus/docs/cleanflight-settings/README.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Cleanflight Settings README</h1></header><article><div><span><p>TODO: the first part of below is just of technical interest - instead start with upgrading to 2.1.0, pasting in <code>parameters.txt</code> and then the appropriate LEDs file and then explaining what you get with this (<em>AUX1</em> and <em>AUX2</em> setup) and suggest that the reader calibrate their accelerometer. Perhaps add in something related to the batter monitor and <a href="https://github.com/cleanflight/cleanflight/issues/2951#issuecomment-332921466">https://github.com/cleanflight/cleanflight/issues/2951#issuecomment-332921466</a></p>
<hr>
<p>The QX95 came with Cleanflight 1.13.0 and as this is too old a version for the modern configurator it dumped me straight into CLI mode on connecting.</p>
<p>Cleanflight 1.13.0 doesn't support the <code>diff</code> command so I created a diff manually like so:</p>
<ul>
<li>Dumped all the parameter values  that the QX95 shipped with using <code>dump</code>.</li>
<li>Reset all parameters to their 1.13.0 defaults using <code>defaults</code></li>
<li>Did another dump and diffed it and the initial one outside Cleanflight.</li>
</ul>
<p>The result can be found in <a href="/arf-drone/docs/assets/cleanflight-settings/1.13.0-diff.txt"><code>1.13.0-diff.txt</code></a>.</p>
<p>I then upgraded the firmware to 2.1.0 (the latest version available at the time of writing), then after connecting I applied the diff I'd created from 1.13.0. I didn't go through any of the parameters to work out what they did, to see if any of the default 2.1.0 values were perhaps more appropriate, I just applied the diff blindly by pasting it in on the CLI tab, followed by <code>save</code>.</p>
<p>The LED setup that comes with the QX95 isn't particularly fancy but I stuck with it. It can be found in <a href="/arf-drone/docs/assets/cleanflight-settings/leds-4.txt"><code>leds-4.txt</code></a>.</p>
<p>However when I switched to the <a href="https://www.banggood.com/Matek-WS2812B-LED-Board-With-5V-Buzzer-For-Naze-32-Skyline-32-Flight-Controller-p-991715.html">Matek LED strip</a> that has six, rather than four, LEDs so I adjusted the setup slightly as otherwise the leftmost four LEDs continued to behave like the original four LED strip while the rightmost two just stayed permanently white. I just configured the rightmost two LEDs of the six LED strip to behave just like the rightmost two LEDs of the four LED strip and made the middle two LEDs of the six LED strip to behave just like the middle two LEDs of the four LED strip.</p>
<p>To apply these change just paste in the contents of <a href="/arf-drone/docs/assets/cleanflight-settings/leds-6.txt"><code>leds-6.txt</code></a>.</p>
<p>When configuring my model on my transmitter I setup the value for switch <em>SF</em> to be sent as channel 5 and that for switch <em>SA</em> to be sent as channel 6.</p>
<p>Channel 5 and 6 are already mapped to <em>AUX1</em> and <em>AUX2</em> in Cleanflight and on the <em>Modes</em> tab in Cleanflight I setup <em>AUX1</em> just for <em>ARM</em> and <em>AUX2</em> to switch between <em>ANGLE</em>, <em>HORIZON</em> and <em>BEEPER</em>.</p>
<p><img src="/arf-drone/docs/assets/cleanflight-settings/modes.png" alt="modes"></p>
<p>The only other thing I did was do <em>Calibrate Accelerometer</em> on the main <em>Setup</em> tab and on the <em>PID Tuning</em> tab I set the joint roll and pitch RC expo to 0.55 and the one for yaw to 0.35.</p>
<p>The final configuration can be found in <a href="/arf-drone/docs/assets/cleanflight-settings/parameters.txt"><code>parameters.txt</code></a> (produced by <code>diff</code>).</p>
<p>Note: upgrading from 1.13.0 to a later version is probably best done before you add a beeper as, for whatever reason, the beeper beeps incessantly while connected to the computer until this is completed.</p>
<hr>
<p>It's possible to disable beeping while powered via USB which may save the sanity of people around you when you're working with the Configurator. On the CLI tab:</p>
<pre><code class="hljs">beeper -ON_USB
save
</code></pre>
<p>To reverse just do the same without the <code>-</code>.</p>
<p>Unfortunately it doesn't seem to be possible to disable the most common beep sequence - the startup sequence you here when you e.g. do <code>save</code> and cause the flight controller to restart. This seems to be a board specific issue - it seems to have been resolved for most boards - see <a href="https://github.com/betaflight/betaflight/issues/218">#218</a> - but the related issues seem to show some boards still have issues.</p>
<p>Note <code>beeper</code> with human readable values like <code>ON_USB</code> (rather than bitmask numbers) was introduced via Betaflight - and is only documented there - see the <a href="https://github.com/betaflight/betaflight/wiki/Betaflight-specific-CLI-commands">Betaflight CLI documentation</a>.</p>
<p>It would be nice if there was something similar to dim the blindingly bright LEDs while on USB.</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 2018-11-25</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/arf-drone/docs/inprogress-qx95"><span class="arrow-prev">← </span><span>Inprogress Qx95</span></a><a class="docs-next button" href="/arf-drone/docs/fpv-x-racer"><span>Fpv X Racer</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"></nav></div></div></body></html>