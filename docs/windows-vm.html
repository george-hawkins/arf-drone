<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Windows Vm · Large Quadcopter Build</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;Some of applications used in this drone build only run on Windows. As I only use Linux and MacOS I had to run these in a VM.&lt;/p&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Windows Vm · Large Quadcopter Build"/><meta property="og:type" content="website"/><meta property="og:url" content="https://george-hawkins.github.io/arf-drone/index.html"/><meta property="og:description" content="&lt;p&gt;Some of applications used in this drone build only run on Windows. As I only use Linux and MacOS I had to run these in a VM.&lt;/p&gt;
"/><meta property="og:image" content="https://george-hawkins.github.io/arf-drone/img/og-image.png"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/arf-drone/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/arf-drone/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/arf-drone/"><img class="logo" src="/arf-drone/img/header-icon.svg" alt="Large Quadcopter Build"/><h2 class="headerTitleWithLogo">Large Quadcopter Build</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Appendices</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Build</h3><ul><li class="navListItem"><a class="navItem" href="/arf-drone/docs/INTRO">Introduction</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/parts">Parts</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/purchase-order">Purchase Order</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/battery-charging">Battery Charging</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/transmitter-getting-started">Transmitter Getting Started</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/stick-setup">Stick Setup</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/transmitter-model-setup">Transmitter Model Setup</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/transmitter-flight-modes">Transmitter Flight Modes</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/receiver">Receiver</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/electronics-assembly">Electronics Assembly</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/binding">Binding</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/pixhawk-setup">Pixhawk Setup</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/frame-parts">Frame Parts</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/pdb-soldering">Pdb Soldering</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/frame-assembly">Frame Assembly</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/final-assembly">Final Assembly</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/build-2/build-2">Build 2</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/final-setup">Final Setup</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Appendices</h3><ul><li class="navListItem"><a class="navItem" href="/arf-drone/docs/pixhawk-leds">Pixhawk Leds</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/pixhawk-tones">Pixhawk Tones</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/pixhawk-driver">Pixhawk Driver</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/transmitter-extras">Transmitter Extras</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/soldering">Soldering</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/stores">Stores</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/arf-drone/docs/windows-vm">Windows Vm</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/opentx-companion-on-ubuntu">Opentx Companion On Ubuntu</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/qgroundcontrol">Qgroundcontrol</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">FPV quad</h3><ul><li class="navListItem"><a class="navItem" href="/arf-drone/docs/eachine-qx95">Eachine Qx95</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/inprogress-qx95">Inprogress Qx95</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/cleanflight-settings/cleanflight-settings-README">Cleanflight Settings README</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/fpv-x-racer">Fpv X Racer</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Followup projects</h3><ul><li class="navListItem"><a class="navItem" href="/arf-drone/docs/video">Video</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/telemetry">Telemetry</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Miscellaneous</h3><ul><li class="navListItem"><a class="navItem" href="/arf-drone/docs/antenna-mount/antenna-mount-README">Antenna Mount README</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/antenna-mount/version-1/antenna-mount-v1-README">Antenna Mount Version 1 README</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/antenna-mount/version-2/antenna-mount-v2-README">Antenna Mount Version 2 README</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/f450-dimensions">F450 Dimensions</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/gps-mast-placement">Gps Mast Placement</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/notes">Notes</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/notes-to-self">Notes To Self</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/pages-and-videos">Pages And Videos</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/power-module-xt60-to-deans">Power Module Xt60 To Deans</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/receiver-power">Receiver Power</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/receiver-windows-upgrade">Receiver Windows Upgrade</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/rx8r">Rx8r</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/unused-parts">Unused Parts</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/vibration-damping-platform">Vibration Damping Platform</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/voice">Voice</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/sounds">Sounds</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/case">Case</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/foam-outline/foam-outline-README">Foam Outline README</a></li><li class="navListItem"><a class="navItem" href="/arf-drone/docs/20181021-rebuild-params/20181021-rebuild-params-README">20181021 Rebuild Params README</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/george-hawkins/arf-drone/edit/docusaurus/docs/windows-vm.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Windows Vm</h1></header><article><div><span><p>Some of applications used in this drone build only run on Windows. As I only use Linux and MacOS I had to run these in a VM.</p>
<p>This is very simple. I used <a href="https://www.virtualbox.org">VirtualBox</a> and the very nicely preconfigured <a href="https://developer.microsoft.com/en-us/microsoft-edge/tools/vms/">Windows 10 (stable) VM</a> that Microsoft makes available for browser testing.</p>
<p>Note: these VMs are not meant for general purpose long term use and are only valid for 90 days (which I don't find an issue).</p>
<p>Once you've installed VirtualBox you just need to unzip the Windows VM download, this produces an OVA file which you should double click - this will start VirtualBox and cause it to automatically install the new VM.</p>
<p>Note: the native MacOS <code>unzip</code> can't handle the zip format Microsoft is using for these VMs - you need to use <code>p7zip</code> (if you're using <a href="https://brew.sh/">Homebrew</a> you just install it with <code>brew install p7zip</code>), see this <a href="https://superuser.com/a/626731/238591">SO answer</a> for more details.</p>
<p>Once installed start the VM - when up and running for the first time just leave it alone for a few minutes and it will automatically activate itself (it also encouraged me to upgrade OneDrive - which I did, it did not then force me to log in to any related cloud service).</p>
<p>The VM is already setup with VirtualBox <a href="https://www.virtualbox.org/manual/ch04.html">guest additions</a> so there's no need to install these.</p>
<p>TODO: this doesn't always seem to be the case - best to install version that matches your VirtualBox version (see below for Ubuntu instructions - process is the same for Mac). Just go to <em>Devices</em> menus and select <em>Insert Guest Additions CD Image...</em>, then in Windows got to Explorer and then to <em>This PC</em> and double click the <em>VirtualBox Guest Additions</em> CD and complete the resulting install process. You can eject the CD afterwards.</p>
<p>In order to use USB passthrough, i.e. access USB devices connected to the host, you do however need to install the VirtualBox extension pack. Go to VirtualBox <a href="https://www.virtualbox.org/wiki/Downloads">downloads</a>, find the &quot;VirtualBox Extension Pack&quot; and click the &quot;all supported platforms&quot; link - this downloads a <code>vbox-extpack</code> file. Just double click this to install it.</p>
<p>Note: host is the term used in virtualization to refer to the real machine, i.e. the physical machine running VirtualBox (though technically you can run VMs within VMs within VMs and so on, so the host may be a VM running another VM).</p>
<p>Once the extensions are installed shutdown the Windows VM, if it's currently running, and then go to the settings for the VM. Go to Ports and then to USB, click &quot;Enable USB Controller&quot; and then select &quot;USB 2.0&quot; (or 3.0 if your machine has USB 3.0 ports). At the same time I also went to Display and increased the video memory to 18MB (simply because there was a warning at the bottom of the setting screen saying that the original value was too low).</p>
<p>Now restart the VM. When you connect a USB device you can go to the VirtualBox Devices menu and then to USB and select the device you're interested in. This will cause the device to become disconnected from the host machine and appear as connected within the VM.</p>
<p>That's it. Now you can use the VM just as you would a physical Windows machine. VirtualBox has many interesting features but if you're new to VirtualBox one feature that's worth mention straight away is the ability to share folders between the host machine and the VM.</p>
<p>Just go to the Devices menu, select Shared Folders, click the folded icon with a plus, select Other... from the Folder Path dropdown, leave Folder Name as it is (unless you want the folder to have a different name on the VM), tick Auto-Mount and Make Permanent (so the folder is automatically available whenever the VM starts) and then OK.</p>
<p>I had to restart the VM for the shared folder to become visible - once done you'll find it as a shared folder under This PC in Explorer.</p>
<p>TODO: add note that you need to change the VM's audio controller setting from the default &quot;ICH AC97&quot; to &quot;Intel HD Audio&quot; if you want audio to work in Windows - this was the case irrespective of whether VirtualBox was running on Mac or Linux - see <a href="/arf-drone/docs/assets/images/virtualization/intel-hd-audio.png"><code>Intel HD Audio</code></a> (from note on <a href="/arf-drone/docs/assets/pixhawk-tones.html"><code>pixhawk-tones.html</code></a> page).</p>
<p>TODO: comment that you &quot;need&quot; to bump video memory up to 18MB - see <a href="/arf-drone/docs/assets/images/virtualization/low-video-memory.png"><code>low-video-memory.png</code></a>.</p>
<p>TODO: comment the VMs provided by Microsoft are only meant for browser testing and technically you should buy a Windows license for this kind of usage.</p>
<p>TODO: note that before you used to log in straight to the desktop - now you need to enter IEUser's password which is &quot;Passw0rd!&quot;.</p>
<h2><a class="anchor" aria-hidden="true" id="usb-filters"></a><a href="#usb-filters" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>USB filters</h2>
<p>Once you've added the extensions pack VirtualBox is quite flexible in how you can handle USB devices. You can just plug them in as normal and afterwards tell VirtualBox to connect the given USB device through to a given VM.</p>
<p>However there are issues with this - often background processes on the host system will grab a USB device as soon as its connected, e.g. because it mistakenly sees it as a modem that needs to be managed or a USB storage device that might contain photos the user wants to add to their photo management tool.</p>
<p>To prevent this you can setup USB filters for a given VM. Make sure the given VM is shutdown - then right click on it in VirtualBox and select <em>Settings...</em>, go to the <em>USB</em> section and make sure <em>Enable USB Controller</em> is ticked and that at least <em>USB 2.0</em> is selected. Then plug in any USB devices that you will want to use with the VM, once plugged in these devices can be added to the list of <em>USB Device Filters</em>. For each device just click the &quot;+&quot; button to the right of the list and select the device from the displayed list.</p>
<p><img src="/arf-drone/docs/assets/images/virtualization/usb-filters.png" alt="adding a USB filter"></p>
<p>Then unplug the devices and start the VM - now if you plug in any of these devices VirtualBox will grab it immediatelly before any other process on the host system sees it and immediatelly connect it to the VM, so avoiding any issues with host process trying to grab the device. When the VM is not running the USB device will be treated as normal, i.e. processes on the host system can see it as before.</p>
<h2><a class="anchor" aria-hidden="true" id="linux-virtualbox"></a><a href="#linux-virtualbox" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Linux VirtualBox</h2>
<p>On Mac I didn't have any problem running the Windows VMs that I downloaded when using the latest version of VirtualBox for Mac. However on Ubuntu 16.04 LTS (Xenial) the latest VirtualBox available using <code>apt-get</code> was 5.0.40 and for whatever reason I found the Windows VMs hung on startup using this version. So I first removed the existing version of VirtualBox (and VirtualBox additions):</p>
<pre><code class="hljs">$ sudo apt-get remove virtualbox virtualbox-guest-additions-iso
</code></pre>
<p>And then, as per the <a href="https://www.virtualbox.org/wiki/Linux_Downloads#Debian-basedLinuxdistributions">Debian-based Linux instructions</a> on the VirtualBox site, I added the following line to <code>/etc/apt/sources.list</code>:</p>
<pre><code class="hljs">deb http://download.virtualbox.org/virtualbox/debian xenial contrib
</code></pre>
<p>Then following the rest of the instructions I installed the corresponding key, updated the package indexes and installed the latest VirtualBox package (along with <code>dkms</code> if not already installed):</p>
<pre><code class="hljs">$ wget -q https://www.virtualbox.org/download/oracle_vbox_2016.asc -O- | sudo apt-key add -
$ sudo apt-get update
$ sudo apt-get install virtualbox-5.1 dkms
</code></pre>
<p>Then make sure to download and install the extensions (as covered up above).</p>
<p>For whatever reason there's no corresponding guest-additions ISO but you get the appropriate one by determining the installed VirtualBox version:</p>
<pre><code class="hljs">$ apt list virtualbox-5.1
virtualbox-5.1/unknown,now 5.1.24-117012~Ubuntu~xenial amd64 [installed]
</code></pre>
<p>Then go to <a href="http://download.virtualbox.org/virtualbox/">http://download.virtualbox.org/virtualbox/</a> and click the appropriate subdirectory (<code>5.1.24</code> in this case). and download the <code>VBoxGuestAdditions</code> ISO file there. You can then attach this to your VM and then open and run it from within the VM to get much nicer integration between the host and the VM (in particular being able to resize the VM window like any other window).</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 2018-11-25</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/arf-drone/docs/stores"><span class="arrow-prev">← </span><span>Stores</span></a><a class="docs-next button" href="/arf-drone/docs/opentx-companion-on-ubuntu"><span>Opentx Companion On Ubuntu</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#usb-filters">USB filters</a></li><li><a href="#linux-virtualbox">Linux VirtualBox</a></li></ul></nav></div></div></body></html>